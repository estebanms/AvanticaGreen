<h1>Listing infractions</h1>

<%= render 'filter' %>

<% if @infractions.empty? %>
  <p>There are no infractions to show.</p>
<% else %>
  <table>
    <tr>
      <th>Reporter</th>
      <th>Offender</th>
      <th>Infraction type</th>
      <th>Status</th>
      <th></th>
      <th></th>
      <th></th>
    </tr>

  <% @infractions.each do |infraction| %>
    <tr>
      <td><%= infraction_related_team(infraction, :reporter) %></td>
      <td><%= infraction_related_team(infraction, :offender) %></td>
      <td><%= infraction.infraction_type %></td>
      <td><%= infraction.status %></td>
      <td><%= link_to 'Show', infraction %></td>
      <% if can? :update, infraction %>
        <td><%= link_to 'Edit', edit_infraction_path(infraction) %></td>
      <% end %>
      <% if can? :destroy, infraction %>
        <td><%= link_to 'Destroy', infraction, :confirm => 'Are you sure?', :method => :delete %></td>
      <% end %>
    </tr>
  <% end %>
  </table>
<% end %>

<br />

<% if can? :create, Infraction %>
  <p><%= link_to 'New Infraction', new_infraction_path %></p>
<% end %>
